{"version":3,"sources":["api/db/collections/controller.js"],"names":["list","download","setActive","deleteCollection","printData","database","activeCallback","sort","collections","a","b","localeCompare","quicksort","low","high","pivot","i","j","temp","swap","req","res","status","send","name","params","collection","fileType","attachment","end","callback","sendStatus","start","query","parseInt","elements"],"mappings":";;;;;QA4BgBA,I,GAAAA,I;QAIAC,Q,GAAAA,Q;QAaAC,S,GAAAA,S;QAGAC,gB,GAAAA,gB;QAIAC,S,GAAAA,S;AApDhB,IAAIC,QAAJ;AACA,IAAIC,cAAJ;;AAEA,SAASC,IAAT,CAAcC,WAAd,EAA0B;AACxBA,cAAYD,IAAZ,CAAiB,UAASE,CAAT,EAAWC,CAAX,EAAa;AAC5B,WAAO,CAACD,EAAEE,aAAF,CAAgBD,CAAhB,CAAR;AACD,GAFD;AAGD;AACD,SAASE,SAAT,CAAmBJ,WAAnB,EAA+BK,GAA/B,EAAmCC,IAAnC,EAAwC;AACtC,MAAGD,MAAIC,IAAP,EAAY;AACV,QAAIC,QAAQP,YAAYM,IAAZ,CAAZ;AACA,QAAIE,IAAIH,GAAR;AACA,SAAI,IAAII,IAAIJ,GAAZ,EAAiBI,IAAEH,IAAnB,EAAwBG,GAAxB,EAA4B;AAC1B,UAAGT,YAAYS,CAAZ,EAAeN,aAAf,CAA6BI,KAA7B,IAAoC,CAAC,CAAxC,EAA0C;AACxC,YAAIG,OAAOV,YAAYS,CAAZ,CAAX;AACAT,oBAAYS,CAAZ,IAAiBT,YAAYQ,CAAZ,CAAjB;AACAR,oBAAYQ,CAAZ,IAAiBE,IAAjB;AACAF,YAAEA,IAAE,CAAJ;AACD;AACF;AACD,QAAIG,OAAOX,YAAYM,IAAZ,CAAX;AACAN,gBAAYM,IAAZ,IAAoBN,YAAYQ,CAAZ,CAApB;AACAR,gBAAYQ,CAAZ,IAAiBG,IAAjB;AACAP,cAAUJ,WAAV,EAAsBK,GAAtB,EAA0BG,IAAE,CAA5B;AACAJ,cAAUJ,WAAV,EAAsBQ,IAAE,CAAxB,EAA0BF,IAA1B;AACD;AACF;;AAEM,SAASd,IAAT,CAAcoB,GAAd,EAAkBC,GAAlB,EAAsB;AAC3B,MAAIb,cAAc,EAAlB;AACAa,MAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBf,WAArB;AACD;AACM,SAASP,QAAT,CAAkBmB,GAAlB,EAAsBC,GAAtB,EAA0B;AAC/B,MAAIG,OAAOJ,IAAIK,MAAJ,CAAWC,UAAtB;AACA,MAAIC,WAAWP,IAAIK,MAAJ,CAAWE,QAA1B;AACA,MAAGA,YAAU,MAAb,EAAqB;AACnBN,QAAIO,UAAJ,CAAkBJ,IAAlB;AACD,GAFD,MAGK,IAAGG,YAAU,KAAb,EAAoBN,IAAIO,UAAJ,CAAkBJ,IAAlB,WAApB,KACD;AACFH,QAAIC,MAAJ,CAAW,GAAX,EAAgBO,GAAhB;AACA;AACD;AACDR,MAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACD;AACM,SAASrB,SAAT,CAAmB4B,QAAnB,EAA6B;AAChCxB,mBAAiBwB,QAAjB;AACH;AACM,SAAS3B,gBAAT,CAA0BiB,GAA1B,EAA8BC,GAA9B,EAAkC;AACrC,MAAIG,OAAOJ,IAAIK,MAAJ,CAAWC,UAAtB;AACAL,MAAIU,UAAJ,CAAe,GAAf;AACH;AACM,SAAS3B,SAAT,CAAmBgB,GAAnB,EAAuBC,GAAvB,EAA2B;AAC9B,MAAIW,KAAJ;AACA,MAAIH,GAAJ;AACA,MAAIL,OAAOJ,IAAIK,MAAJ,CAAWC,UAAtB;AACA,MAAGN,IAAIa,KAAJ,CAAUD,KAAb,EAAoBA,QAAQE,SAASd,IAAIa,KAAJ,CAAUD,KAAnB,CAAR;AACpB,MAAGZ,IAAIa,KAAJ,CAAUJ,GAAb,EAAkBA,MAAMK,SAASd,IAAIa,KAAJ,CAAUJ,GAAnB,CAAN;AAClBM,aAAW,EAAX;AACAd,MAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBY,QAArB;AACH","file":"controller.js","sourcesContent":["var database;\r\nvar activeCallback;\r\n\r\nfunction sort(collections){\r\n  collections.sort(function(a,b){\r\n    return -a.localeCompare(b);\r\n  });\r\n}\r\nfunction quicksort(collections,low,high){\r\n  if(low<high){\r\n    let pivot = collections[high];\r\n    let i = low;\r\n    for(var j = low; j<high;j++){\r\n      if(collections[j].localeCompare(pivot)>-1){\r\n        let temp = collections[j];\r\n        collections[j] = collections[i];\r\n        collections[i] = temp;\r\n        i=i+1;\r\n      }\r\n    }\r\n    let swap = collections[high];\r\n    collections[high] = collections[i];\r\n    collections[i] = swap;\r\n    quicksort(collections,low,i-1);\r\n    quicksort(collections,i+1,high);\r\n  }\r\n}\r\n\r\nexport function list(req,res){\r\n  var collections = [];\r\n  res.status(200).send(collections);\r\n}\r\nexport function download(req,res){\r\n  var name = req.params.collection;\r\n  var fileType = req.params.fileType;\r\n  if(fileType==\"json\") {\r\n    res.attachment(`${name}.json`);\r\n  }\r\n  else if(fileType==\"csv\") res.attachment(`${name}.csv`);\r\n  else{\r\n    res.status(401).end();\r\n    return;\r\n  }\r\n  res.status(200).send();\r\n}\r\nexport function setActive(callback) {\r\n    activeCallback = callback;\r\n}\r\nexport function deleteCollection(req,res){\r\n    var name = req.params.collection;\r\n    res.sendStatus(200);\r\n}\r\nexport function printData(req,res){\r\n    var start;\r\n    var end;\r\n    var name = req.params.collection;\r\n    if(req.query.start) start = parseInt(req.query.start);\r\n    if(req.query.end) end = parseInt(req.query.end);\r\n    elements = [];\r\n    res.status(200).send(elements);\r\n}"]}